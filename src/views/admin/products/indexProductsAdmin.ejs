<!DOCTYPE html>
<%-include("../partials/headAdmin")%>
<body>
    <%-include("../partials/headerAdmin")%>

    <main>
        <article class="art-title">
            <h2>
                <%=postHeader%>
            </h2>
            <hr>
        </article>
        <article>
            <button class="btn-add">
                <a href="/admin/productos/agregar">
                    <i class="fa-solid fa-plus"></i> Nuevo Producto
                </a>
            </button>
        </article>
        <article class="art-search">
            <form action="/admin/productos/buscar" method="get">
                <input type="text" name="search" id="search" placeholder="Buscar Producto">
                <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
            </form>
        </article>

        <article class="container-fluid">
            <table class="table table-striped table-hover">
                <thead>
                  <tr class="text-center">
                    <th scope="col">id</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Categoria</th>
                    <th scope="col">Precio</th>
                    <th scope="col"></th>
                  </tr>
                </thead>
                <tbody>
                    <% product.forEach(producto => { %>
                        <tr class="text-center">
                            <th scope="row"><%=producto.id%></th>
                            <td class="texto-corto"><%=producto.name%></td>
                            <td class="texto-corto"><%=producto.categories.name%></td> 
                            <td>$<%=producto.price%></td>

                            <td class="btn-edit">
                              <a href="/admin/productos/editar/<%- producto.id %>" class="btn btn-success">
                                <i class="fa-solid fa-pen-to-square"></i>
                              </a>
                              <form action="/admin/productos/eliminar/<%- producto.id %>?_method=DELETE" method="POST">
                                <button class="btn btn-danger" type="submit" id="bottomDelete" onclick="return confirmDelete()">
                                  <i class="fa-solid fa-trash-can"></i>
                                </button>
                              </form>
                            </td>
                        </tr>
                    <% }) %>
                </tbody>
              </table>
        </article>

        <a href="/" class="backToHome">Salir del administrador</a>
    </main>

    <script src="/js/adminJs/adminValidatorDelete.js"></script>

    <%-include("../partials/footerAdmin")%>
</body>
</html>